---
title: "Dental Data Pack"
subtitle: "`r params$region`"
date: "`r paste(format(Sys.time(), '%B, %Y'), ' - Reporting up to end of', format(Sys.Date() - lubridate::weeks(4), '%B, %Y'))`"
output:
  xaringan::moon_reader:
    css: [theme.css, nhsr-fonts.css]
    self_contained: true
    lib_dir: libs
    nature:
      ratio: '16:9'
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
params:
  region: "London"
---


```{r setup, include=FALSE}
library(tidyverse)
library(readxl)
library(DBI)
library(odbc)
library(reactable)
library(downloadthis)
library(lubridate)
library(knitr)
library(ggrepel)
options(htmltools.dir.version = FALSE, htmltools.preserve.raw = FALSE)
options(knitr.duplicate.label = 'allow')

#avoid standard form
options(scipen=999)

# Suppress summarise info
options(dplyr.summarise.inform = FALSE)

```

```{r xaringan-panelset, echo=FALSE}
xaringanExtra::use_panelset()
```

```{r, message =FALSE, include=FALSE}
source(knitr::purl("SQLpulls.Rmd", output = tempfile()), local = TRUE)
```

```{r, message =FALSE, include=FALSE}
source(knitr::purl("Data_Processing.Rmd", output = tempfile()))
```

```{r, message =FALSE, include=FALSE}
source(knitr::purl("plotting.Rmd", output = tempfile()))
```

```{r set ICB name, include=FALSE}

#get STPs for each region
if(params$region == "South West"){
  
  region <- "South West"
  
  STP1 <- "Bristol, North Somerset and South Gloucestershire ICB"
  STP2 <- "Dorset ICB"
  STP3 <- "Bath and North East Somerset, Swindon and Wiltshire ICB"
  STP4 <- "Somerset ICB"
  STP5 <- "Devon ICB"
  STP6 <- "Cornwall and The Isles Of Scilly ICB"
  STP7 <- "Gloucestershire ICB"
  STP8 <- NULL
  STP9 <- NULL
  STP10 <- NULL
  STP11 <- NULL
  
  STPs <- c(STP1, STP2, STP3, STP4, STP5, STP6, STP7)
  
  eval4 <- TRUE
  eval5 <- TRUE
  eval6 <- TRUE
  eval7 <- TRUE
  eval8 <- FALSE
  eval9 <- FALSE
  eval10 <- FALSE
  eval11 <- FALSE
  
}else if(params$region == "South East"){
  
  region <- "South East"
  
  STP1 <- "Sussex ICB"
  STP2 <- "Buckinghamshire, Oxfordshire and Berkshire West ICB"
  STP3 <- "Surrey Heartlands ICB"
  STP4 <- "Kent and Medway ICB"
  STP5 <- "Hampshire and Isle Of Wight ICB"
  STP6 <- "Frimley ICB"
  STP7 <- NULL
  STP8 <- NULL
  STP9 <- NULL
  STP10 <- NULL
  STP11 <- NULL
  
  STPs <- c(STP1, STP2, STP3, STP4, STP5, STP6)
  
  eval4 <- TRUE
  eval5 <- TRUE
  eval6 <- TRUE
  eval7 <- FALSE
  eval8 <- FALSE
  eval9 <- FALSE
  eval10 <- FALSE
  eval11 <- FALSE
  
}else if(params$region == "North West"){
  
  region <- "North West"
  
  STP1 <- "Greater Manchester ICB"
  STP2 <- "Cheshire and Merseyside ICB"
  STP3 <- "Lancashire and South Cumbria ICB"
  STP4 <- NULL
  STP5 <- NULL
  STP6 <- NULL
  STP7 <- NULL
  STP8 <- NULL
  STP9 <- NULL
  STP10 <- NULL
  STP11 <- NULL
  
  STPs <- c(STP1, STP2, STP3)
  
  eval4 <- FALSE
  eval5 <- FALSE
  eval6 <- FALSE
  eval7 <- FALSE
  eval8 <- FALSE
  eval9 <- FALSE
  eval10 <- FALSE
  eval11 <- FALSE
  
}else if(params$region == "North East And Yorkshire"){
  
  region <- "North East And Yorkshire"
  
  STP1 <- "Humber and North Yorkshire ICB"
  STP2 <- "South Yorkshire ICB"
  STP3 <- "North East and North Cumbria ICB"
  STP4 <- "West Yorkshire ICB"
  STP5 <- NULL
  STP6 <- NULL
  STP7 <- NULL
  STP8 <- NULL
  STP9 <- NULL
  STP10 <- NULL
  STP11 <- NULL
  
  STPs <- c(STP1, STP2, STP3, STP4)
  
  eval4 <- TRUE
  eval5 <- FALSE
  eval6 <- FALSE
  eval7 <- FALSE
  eval8 <- FALSE
  eval9 <- FALSE
  eval10 <- FALSE
  eval11 <- FALSE
  
}else if(params$region == "London"){
  
  region <- "London"
  
  STP1 <- "North Central London ICB"
  STP2 <- "South East London ICB"
  STP3 <- "North East London ICB"
  STP4 <- "South West London ICB"
  STP5 <- "North West London ICB"
  STP6 <- NULL
  STP7 <- NULL
  STP8 <- NULL
  STP9 <- NULL
  STP10 <- NULL
  STP11 <- NULL
  
  STPs <- c(STP1, STP2, STP3, STP4, STP5)
  
  eval4 <- TRUE
  eval5 <- TRUE
  eval6 <- FALSE
  eval7 <- FALSE
  eval8 <- FALSE
  eval9 <- FALSE
  eval10 <- FALSE
  eval11 <- FALSE
  
}else if(params$region == "Midlands"){
  
  region <- "Midlands"
  
  STP1 <- "Leicester, Leicestershire and Rutland ICB"
  STP2 <- "Herefordshire and Worcestershire ICB"
  STP3 <- "Nottingham and Nottinghamshire ICB"
  STP4 <- "Black Country ICB"
  STP5 <- "Staffordshire and Stoke-on-Trent ICB"
  STP6 <- "Northamptonshire ICB"
  STP7 <- "Shropshire, Telford and Wrekin ICB"
  STP8 <- "Lincolnshire ICB"
  STP9 <- "Birmingham and Solihull ICB"
  STP10 <- "Coventry and Warwickshire ICB"
  STP11 <- "Derby and Derbyshire ICB"
  
  STPs <- c(STP1, STP2, STP3, STP4, STP5, STP6, STP7, STP8, STP9, STP10, STP11)
  
  eval4 <- TRUE
  eval5 <- TRUE
  eval6 <- TRUE
  eval7 <- TRUE
  eval8 <- TRUE
  eval9 <- TRUE
  eval10 <- TRUE
  eval11 <- TRUE
  
}else if(params$region == "East Of England"){
  
  region <- "East of England"
  
  STP1 <- "Hertfordshire and West Essex ICB"
  STP2 <- "Mid and South Essex ICB"
  STP3 <- "Norfolk and Waveney ICB"
  STP4 <- "Cambridgeshire and Peterborough ICB"
  STP5 <- "Bedfordshire, Luton and Milton Keynes ICB"
  STP6 <- "Suffolk and North East Essex ICB"
  STP7 <- NULL
  STP8 <- NULL
  STP9 <- NULL
  STP10 <- NULL
  STP11 <- NULL
  
  STPs <- c(STP1, STP2, STP3, STP4, STP5, STP6)
  
  eval4 <- TRUE
  eval5 <- TRUE
  eval6 <- TRUE
  eval7 <- FALSE
  eval8 <- FALSE
  eval9 <- FALSE
  eval10 <- FALSE
  eval11 <- FALSE
  
}

```




```{css, echo=F}
    /* Table width = 100% max-width */

    .remark-slide table{
        width: 100%;
    }

    /* Change the background color to white for shaded rows (even rows) */

    .remark-slide thead, .remark-slide tr:nth-child(2n) {
        background-color: white;
    }
```



### UDA Activity Data

```{r xaringan-panelset-UDA_delivery_wd, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="1">
.panelset[

.panel[.panel-name[`r region`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center'}
plot_UDA_UOA_delivery_wd(data = UDA_calendar_data, 
                                  UDAorUOA = "UDA",
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "Regional",
                                  region_STP_name = region)


```

* This graph shows the average monthly performance of the **`r get_num_contracts(level = "Regional", region_STP_name = region)`** GDS contracts scaled up by 12 months measured against the delivery thresholds (60% for Apr-Sep 21, 65% for Oct-Dec, 85% for Jan-Mar, 95% for Apr-Jun 22 and 100% going forward).

* The blue line in the graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.
]
.panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center'}
plot_UDA_UOA_delivery_wd(data = UDA_calendar_data, 
                                  UDAorUOA = "UDA",
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                   level = "STP",
                                  region_STP_name = STP1)

```

* This graph shows the average monthly performance of the **`r get_num_contracts(level = "STP", region_STP_name = STP1)`** GDS contracts scaled up by 12 months measured against the delivery thresholds (60% for Apr-Sep 21, 65% for Oct-Dec, 85% for Jan-Mar, 95% for Apr-Jun 22 and 100% going forward).

* The blue line in the graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.
]
.panel[.panel-name[`r STP2`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center'}
plot_UDA_UOA_delivery_wd(data = UDA_calendar_data, 
                                  UDAorUOA = "UDA",
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                   level = "STP",
                                  region_STP_name = STP2)
```

* This graph shows the average monthly performance of the **`r get_num_contracts(level = "STP", region_STP_name = STP2)`** GDS contracts scaled up by 12 months measured against the delivery thresholds (60% for Apr-Sep 21, 65% for Oct-Dec, 85% for Jan-Mar, 95% for Apr-Jun 22 and 100% going forward).

* The blue line in the graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.
]
.panel[.panel-name[`r STP3`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center'}
plot_UDA_UOA_delivery_wd(data = UDA_calendar_data, 
                                  UDAorUOA = "UDA",
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                   level = "STP",
                                  region_STP_name = STP3)

```

* This graph shows the average monthly performance of the **`r get_num_contracts(level = "STP", region_STP_name = STP3)`** GDS contracts scaled up by 12 months measured against the delivery thresholds (60% for Apr-Sep 21, 65% for Oct-Dec, 85% for Jan-Mar, 95% for Apr-Jun 22 and 100% going forward).

* The blue line in the graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

]
.panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval = eval4}
plot_UDA_UOA_delivery_wd(data = UDA_calendar_data, 
                                  UDAorUOA = "UDA",
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                   level = "STP",
                                  region_STP_name = STP4)

```

* This graph shows the average monthly performance of the **`r if(eval4){get_num_contracts(level = "STP", region_STP_name = STP4)}`** GDS contracts scaled up by 12 months measured against the delivery thresholds (60% for Apr-Sep 21, 65% for Oct-Dec, 85% for Jan-Mar, 95% for Apr-Jun 22 and 100% going forward).

* The blue line in the graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

]
.panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval = eval5}
plot_UDA_UOA_delivery_wd(data = UDA_calendar_data, 
                                  UDAorUOA = "UDA",
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                   level = "STP",
                                  region_STP_name = STP5)
```

* This graph shows the average monthly performance of the **`r if(eval5){get_num_contracts(level = "STP", region_STP_name = STP5)}`** GDS contracts scaled up by 12 months measured against the delivery thresholds (60% for Apr-Sep 21, 65% for Oct-Dec, 85% for Jan-Mar, 95% for Apr-Jun 22 and 100% going forward).

* The blue line in the graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

]
.panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval = eval6}
plot_UDA_UOA_delivery_wd(data = UDA_calendar_data, 
                                  UDAorUOA = "UDA",
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                   level = "STP",
                                  region_STP_name = STP6)
```

* This graph shows the average monthly performance of the **`r if(eval6){get_num_contracts(level = "STP", region_STP_name = STP6)}`** GDS contracts scaled up by 12 months measured against the delivery thresholds (60% for Apr-Sep 21, 65% for Oct-Dec, 85% for Jan-Mar, 95% for Apr-Jun 22 and 100% going forward).

* The blue line in the graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

]
.panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval = eval7}
plot_UDA_UOA_delivery_wd(data = UDA_calendar_data, 
                                  UDAorUOA = "UDA",
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                   level = "STP",
                                  region_STP_name = STP7)
```

* This graph shows the average monthly performance of the **`r if(eval7){get_num_contracts(level = "STP", region_STP_name = STP7)}`** GDS contracts scaled up by 12 months measured against the delivery thresholds (60% for Apr-Sep 21, 65% for Oct-Dec, 85% for Jan-Mar, 95% for Apr-Jun 22 and 100% going forward).

* The blue line in the graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.
]
.panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval = eval8}
plot_UDA_UOA_delivery_wd(data = UDA_calendar_data, 
                                  UDAorUOA = "UDA",
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                   level = "STP",
                                  region_STP_name = STP8)
```

* This graph shows the average monthly performance of the **`r if(eval8){get_num_contracts(level = "STP", region_STP_name = STP8)}`** GDS contracts scaled up by 12 months measured against the delivery thresholds (60% for Apr-Sep 21, 65% for Oct-Dec, 85% for Jan-Mar, 95% for Apr-Jun 22 and 100% going forward).

* The blue line in the graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

]
.panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval = eval9}
plot_UDA_UOA_delivery_wd(data = UDA_calendar_data, 
                                  UDAorUOA = "UDA",
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                   level = "STP",
                                  region_STP_name = STP9)
```

* This graph shows the average monthly performance of the **`r if(eval9){get_num_contracts(level = "STP", region_STP_name = STP9)}`** GDS contracts scaled up by 12 months measured against the delivery thresholds (60% for Apr-Sep 21, 65% for Oct-Dec, 85% for Jan-Mar, 95% for Apr-Jun 22 and 100% going forward).

* The blue line in the graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

]
.panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval = eval10}
plot_UDA_UOA_delivery_wd(data = UDA_calendar_data, 
                                  UDAorUOA = "UDA",
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                   level = "STP",
                                  region_STP_name = STP10)
```

* This graph shows the average monthly performance of the **`r if(eval10){get_num_contracts(level = "STP", region_STP_name = STP10)}`** GDS contracts scaled up by 12 months measured against the delivery thresholds (60% for Apr-Sep 21, 65% for Oct-Dec, 85% for Jan-Mar, 95% for Apr-Jun 22 and 100% going forward).

* The blue line in the graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.


]
.panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval = eval11}
plot_UDA_UOA_delivery_wd(data = UDA_calendar_data, 
                                  UDAorUOA = "UDA",
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                   level = "STP",
                                  region_STP_name = STP11)
```

* This graph shows the average monthly performance of the **`r if(eval11){get_num_contracts(level = "STP", region_STP_name = STP11)}`** GDS contracts scaled up by 12 months measured against the delivery thresholds (60% for Apr-Sep 21, 65% for Oct-Dec, 85% for Jan-Mar, 95% for Apr-Jun 22 and 100% going forward).

* The blue line in the graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

]
]

---

### UDA activity- calendar data standardised by working days

```{r xaringan-panelset-historic_UDA_delivery_wd, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="1">
.panelset[

.panel[.panel-name[`r region`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_historic_UDA_delivery_wd(data = UDA_calendar_data,
                                             level = "Regional",
                                             region_STP_name = region)

```

* The red trend line in the right graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

* The black trend line shows the average performance of GDS contracts. In current financial year scaled up by 12.
]
.panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_historic_UDA_delivery_wd(data = UDA_calendar_data,
                                             level = "STP",
                                             region_STP_name = STP1)

```

* The red trend line in the right graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

* The black trend line shows the average performance of GDS contracts. In current financial year scaled up by 12.
]
.panel[.panel-name[`r STP2`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_historic_UDA_delivery_wd(data = UDA_calendar_data,
                                             level = "STP",
                                             region_STP_name = STP2)
```

* The red trend line in the right graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

* The black trend line shows the average performance of GDS contracts. In current financial year scaled up by 12.
]
.panel[.panel-name[`r STP3`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_historic_UDA_delivery_wd(data = UDA_calendar_data,
                                             level = "STP",
                                             region_STP_name = STP3)
```

* The red trend line in the right graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

* The black trend line shows the average performance of GDS contracts. In current financial year scaled up by 12.
]
.panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval4}
plot_historic_UDA_delivery_wd(data = UDA_calendar_data,
                                             level = "STP",
                                             region_STP_name = STP4)
```
* The red trend line in the right graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

* The black trend line shows the average performance of GDS contracts. In current financial year scaled up by 12.

]
.panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval5}
plot_historic_UDA_delivery_wd(data = UDA_calendar_data,
                                             level = "STP",
                                             region_STP_name = STP5)
```
* The red trend line in the right graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

* The black trend line shows the average performance of GDS contracts. In current financial year scaled up by 12.

]
.panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval6}
plot_historic_UDA_delivery_wd(data = UDA_calendar_data,
                                             level = "STP",
                                             region_STP_name = STP6)
```

* The red trend line in the right graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

* The black trend line shows the average performance of GDS contracts. In current financial year scaled up by 12.

]
.panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval7}
plot_historic_UDA_delivery_wd(data = UDA_calendar_data,
                                             level = "STP",
                                             region_STP_name = STP7)
```

* The red trend line in the right graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

* The black trend line shows the average performance of GDS contracts. In current financial year scaled up by 12.
]
.panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval8}
plot_historic_UDA_delivery_wd(data = UDA_calendar_data,
                                             level = "STP",
                                             region_STP_name = STP8)
```
* The red trend line in the right graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

* The black trend line shows the average performance of GDS contracts. In current financial year scaled up by 12.

]
.panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval9}
plot_historic_UDA_delivery_wd(data = UDA_calendar_data,
                                             level = "STP",
                                             region_STP_name = STP9)
```

* The red trend line in the right graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

* The black trend line shows the average performance of GDS contracts. In current financial year scaled up by 12.

]
.panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval10}
plot_historic_UDA_delivery_wd(data = UDA_calendar_data,
                                             level = "STP",
                                             region_STP_name = STP10)
```

* The red trend line in the right graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

* The black trend line shows the average performance of GDS contracts. In current financial year scaled up by 12.

]
.panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval11}
plot_historic_UDA_delivery_wd(data = UDA_calendar_data,
                                             level = "STP",
                                             region_STP_name = STP11)
```

* The red trend line in the right graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

* The black trend line shows the average performance of GDS contracts. In current financial year scaled up by 12.
]
]


---

### YTD UDA delivery

```{r xaringan-panelset-YTD_UDA_delivery, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="2">
.panelset[

.panel[.panel-name[`r region`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center'}
plot_YTD_UDA_UOA_delivery(data = UDA_calendar_data, 
                          UDAorUOA = "UDA", 
                          level = "Regional", 
                          region_STP_name = region, 
                          plotChart = TRUE, 
                          all_regions_and_STPs = FALSE)

```


]
.panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center'}
plot_YTD_UDA_UOA_delivery(data = UDA_calendar_data, 
                          UDAorUOA = "UDA", 
                          level = "STP",
                          region_STP_name = STP1, 
                          plotChart = TRUE, 
                          all_regions_and_STPs = FALSE)

```


]
.panel[.panel-name[`r STP2``]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center'}
plot_YTD_UDA_UOA_delivery(data = UDA_calendar_data, 
                          UDAorUOA = "UDA", 
                          level = "STP",
                          region_STP_name = STP2, 
                          plotChart = TRUE, 
                          all_regions_and_STPs = FALSE)
```


]
.panel[.panel-name[`r STP3`]
```{r  echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center'}
plot_YTD_UDA_UOA_delivery(data = UDA_calendar_data, 
                          UDAorUOA = "UDA", 
                          level = "STP",
                          region_STP_name = STP3, 
                          plotChart = TRUE, 
                          all_regions_and_STPs = FALSE)
```


]
.panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval4}
plot_YTD_UDA_UOA_delivery(data = UDA_calendar_data, 
                          UDAorUOA = "UDA", 
                          level = "STP",
                          region_STP_name = STP4, 
                          plotChart = TRUE, 
                          all_regions_and_STPs = FALSE)
```


]
.panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval5}
plot_YTD_UDA_UOA_delivery(data = UDA_calendar_data, 
                          UDAorUOA = "UDA", 
                          level = "STP",
                          region_STP_name = STP5, 
                          plotChart = TRUE, 
                          all_regions_and_STPs = FALSE)
```


]
.panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval6}
plot_YTD_UDA_UOA_delivery(data = UDA_calendar_data, 
                          UDAorUOA = "UDA", 
                          level = "STP",
                          region_STP_name = STP6, 
                          plotChart = TRUE, 
                          all_regions_and_STPs = FALSE)
```


]
.panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval7}
plot_YTD_UDA_UOA_delivery(data = UDA_calendar_data, 
                          UDAorUOA = "UDA", 
                          level = "STP",
                          region_STP_name = STP7, 
                          plotChart = TRUE, 
                          all_regions_and_STPs = FALSE)
```


]
.panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval8}
plot_YTD_UDA_UOA_delivery(data = UDA_calendar_data, 
                          UDAorUOA = "UDA", 
                          level = "STP",
                          region_STP_name = STP8, 
                          plotChart = TRUE, 
                          all_regions_and_STPs = FALSE)
```


]
.panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval9}
plot_YTD_UDA_UOA_delivery(data = UDA_calendar_data, 
                          UDAorUOA = "UDA", 
                          level = "STP",
                          region_STP_name = STP9, 
                          plotChart = TRUE, 
                          all_regions_and_STPs = FALSE)
```


]
.panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval10}
plot_YTD_UDA_UOA_delivery(data = UDA_calendar_data, 
                          UDAorUOA = "UDA", 
                          level = "STP",
                          region_STP_name = STP10, 
                          plotChart = TRUE, 
                          all_regions_and_STPs = FALSE)
```


]
.panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval11}
plot_YTD_UDA_UOA_delivery(data = UDA_calendar_data, 
                          UDAorUOA = "UDA", 
                          level = "STP",
                          region_STP_name = STP11, 
                          plotChart = TRUE, 
                          all_regions_and_STPs = FALSE)
```


]
]

---



### UOA activity- calendar data standardised by working days

```{r xaringan-panelset-historic_UOA_delivery_wd, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="1">
.panelset[

.panel[.panel-name[`r region`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_historic_UOA_delivery_wd(data = UOA_calendar_data,
                                             level = "Regional",
                                             region_STP_name = region)

```

* The red trend line in the right graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

* The black trend line shows the average performance of GDS contracts. In current financial year scaled up by 12.
]
.panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_historic_UOA_delivery_wd(data = UOA_calendar_data,
                                             level = "STP",
                                             region_STP_name = STP1)

```

* The red trend line in the right graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

* The black trend line shows the average performance of GDS contracts. In current financial year scaled up by 12.
]
.panel[.panel-name[`r STP2`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_historic_UOA_delivery_wd(data = UOA_calendar_data,
                                             level = "STP",
                                             region_STP_name = STP2)
```

* The red trend line in the right graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

* The black trend line shows the average performance of GDS contracts. In current financial year scaled up by 12.
]
.panel[.panel-name[`r STP3`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_historic_UOA_delivery_wd(data = UOA_calendar_data,
                                             level = "STP",
                                             region_STP_name = STP3)
```

* The red trend line in the right graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

* The black trend line shows the average performance of GDS contracts. In current financial year scaled up by 12.
]
.panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval4}
plot_historic_UOA_delivery_wd(data = UOA_calendar_data,
                                             level = "STP",
                                             region_STP_name = STP4)
```
* The red trend line in the right graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

* The black trend line shows the average performance of GDS contracts. In current financial year scaled up by 12.

]
.panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval5}
plot_historic_UOA_delivery_wd(data = UOA_calendar_data,
                                             level = "STP",
                                             region_STP_name = STP5)
```
* The red trend line in the right graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

* The black trend line shows the average performance of GDS contracts. In current financial year scaled up by 12.

]
.panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval6}
plot_historic_UOA_delivery_wd(data = UOA_calendar_data,
                                             level = "STP",
                                             region_STP_name = STP6)
```

* The red trend line in the right graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

* The black trend line shows the average performance of GDS contracts. In current financial year scaled up by 12.

]
.panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval7}
plot_historic_UOA_delivery_wd(data = UOA_calendar_data,
                                             level = "STP",
                                             region_STP_name = STP7)
```

* The red trend line in the right graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

* The black trend line shows the average performance of GDS contracts. In current financial year scaled up by 12.
]
.panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval8}
plot_historic_UOA_delivery_wd(data = UOA_calendar_data,
                                             level = "STP",
                                             region_STP_name = STP8)
```
* The red trend line in the right graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

* The black trend line shows the average performance of GDS contracts. In current financial year scaled up by 12.

]
.panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval9}
plot_historic_UOA_delivery_wd(data = UOA_calendar_data,
                                             level = "STP",
                                             region_STP_name = STP9)
```

* The red trend line in the right graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

* The black trend line shows the average performance of GDS contracts. In current financial year scaled up by 12.

]
.panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval10}
plot_historic_UOA_delivery_wd(data = UOA_calendar_data,
                                             level = "STP",
                                             region_STP_name = STP10)
```

* The red trend line in the right graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

* The black trend line shows the average performance of GDS contracts. In current financial year scaled up by 12.

]
.panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval11}
plot_historic_UOA_delivery_wd(data = UOA_calendar_data,
                                             level = "STP",
                                             region_STP_name = STP11)
```

* The red trend line in the right graph shows an alternative method of calculating the denominator for contracted UDAs expected each month. Here the denominator is annual contracted UDAs * monthly working days/annual working days. The usual denominator is annual contracted UDAs/12.

* The black trend line shows the average performance of GDS contracts. In current financial year scaled up by 12.
]
]


---

### YTD UOA delivery

```{r xaringan-panelset-YTD_UOA_delivery, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="2">
.panelset[

.panel[.panel-name[`r region`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center'}

plot_YTD_UDA_UOA_delivery(data = UOA_calendar_data, 
                                  UDAorUOA = "UOA",
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "Regional",
                                  region_STP_name = Region)

```


]
.panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center'}
plot_YTD_UDA_UOA_delivery(data = UOA_calendar_data, 
                                  UDAorUOA = "UOA",
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP1)

```


]
.panel[.panel-name[`r STP2``]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center'}
plot_YTD_UDA_UOA_delivery(data = UOA_calendar_data, 
                                  UDAorUOA = "UOA",
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP2)
```


]
.panel[.panel-name[`r STP3`]
```{r  echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center'}
plot_YTD_UDA_UOA_delivery(data = UOA_calendar_data, 
                                  UDAorUOA = "UOA",
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP3)

```


]
.panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval4}
plot_YTD_UDA_UOA_delivery(data = UOA_calendar_data, 
                                  UDAorUOA = "UOA",
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP4)

```


]
.panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval5}
plot_YTD_UDA_UOA_delivery(data = UOA_calendar_data, 
                                  UDAorUOA = "UOA",
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP5)

```


]
.panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval6}
plot_YTD_UDA_UOA_delivery(data = UOA_calendar_data, 
                                  UDAorUOA = "UOA",
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP6)

```


]
.panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval7}
plot_YTD_UDA_UOA_delivery(data = UOA_calendar_data, 
                                  UDAorUOA = "UOA",
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP7)

```


]
.panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval8}
plot_YTD_UDA_UOA_delivery(data = UOA_calendar_data, 
                                  UDAorUOA = "UOA",
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP8)

```


]
.panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval9}
plot_YTD_UDA_UOA_delivery(data = UOA_calendar_data, 
                                  UDAorUOA = "UOA",
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP9)

```


]
.panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval10}
plot_YTD_UDA_UOA_delivery(data = UOA_calendar_data, 
                                  UDAorUOA = "UOA",
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP10)

```


]
.panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval11}
plot_YTD_UDA_UOA_delivery(data = UOA_calendar_data, 
                                  UDAorUOA = "UOA",
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP11)

```


]
]


